/* Common base styling for both themes */
:root {
    --primary-color: #4a86e8;
    --header-bg-color: #1a1a1a;
    --header-text-color: #e0e0e0;
    --table-border-color: #555;
    --table-header-bg: #333;
    --table-header-text: #f0f0f0;
    --table-row-even: #2a2a2a;
    --table-row-odd: #222;
    --table-row-hover: #3a3a3a;
    --code-bg-color: #282c34;
    --code-text-color: #f0f0f0;
    --warning-text-color: #ffd740;
  }
  
  /* Hide the sidebar completely */
  .bd-sidebar-primary {
    display: none !important;
  }
  
  .bd-main .bd-content {
    margin-left: 0 !important;
    flex-grow: 1;
    max-width: 100% !important;
  }
  
  /* Better article layout */
  article.bd-article {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2em;
  }
  
  /* Make copy button more visible */
  button.copybtn {
    background-color: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 4px;
  }
  
  button.copybtn:hover {
    background-color: rgba(255, 255, 255, 0.3);
  }
  
  /* Remove redundant elements */
  .navbar-header-items {
    display: none !important;
  }
  
  /* Dark Theme Styling */
  html[data-theme="dark"] {
    --pst-color-primary: var(--primary-color);
    --pst-color-background: #1a1a1a;
    --pst-color-on-background: #d0d0d0;  /* Reduced contrast text */
    --pst-color-surface: #222;
    --pst-color-on-surface: #d0d0d0;  /* Reduced contrast text */
  }
  
  html[data-theme="dark"] body {
    background-color: #1a1a1a;
    color: #d0d0d0;  /* Reduced contrast text */
  }
  
  html[data-theme="dark"] .bd-header {
    background-color: var(--header-bg-color);
    border-bottom: 1px solid #333;
  }
  
  html[data-theme="dark"] .bd-content {
    color: #d0d0d0;  /* Reduced contrast text */
    font-size: 16px;
    line-height: 1.7;
    letter-spacing: 0.01em;
  }
  
  /* Light Theme Styling */
  html[data-theme="light"] {
    --pst-color-primary: #0366d6;
    --pst-color-background: #f8f9fa;
    --pst-color-on-background: #333;
    --pst-color-surface: #fff;
    --pst-color-on-surface: #333;
  }
  
  html[data-theme="light"] body {
    background-color: #f8f9fa;
    color: #333;
  }
  
  html[data-theme="light"] .bd-header {
    background-color: #fff;
    border-bottom: 1px solid #ddd;
  }
  
  html[data-theme="light"] .bd-content {
    color: #333;
  }
  
  /* Table styling for both themes */
  .dataframe {
    border-collapse: collapse;
    margin: 20px 0;
    width: 100%;
    font-size: 0.9em;
    border-radius: 8px;
    overflow: hidden;
  }
  
  /* Dark theme table */
  html[data-theme="dark"] .dataframe {
    background-color: #2c2c2c;
    border: 1px solid var(--table-border-color);
  }
  
  html[data-theme="dark"] .dataframe th {
    background-color: #444;
    color: #f0f0f0;
    font-weight: bold;
    text-align: left;
    padding: 12px 15px;
    border: 1px solid #555;
  }
  
  html[data-theme="dark"] .dataframe td {
    padding: 10px 15px;
    border: 1px solid #444;
    color: #d0d0d0;
  }
  
  html[data-theme="dark"] .dataframe tr {
    background-color: #2c2c2c !important;
  }
  
  
  html[data-theme="dark"] .dataframe tr:hover {
    background-color: #444;
  }
  
  /* Light theme table */
  html[data-theme="light"] .dataframe {
    background-color: #fff;
    border: 1px solid #ddd;
  }
  
  html[data-theme="light"] .dataframe th {
    background-color: #f2f2f2;
    color: #333;
    font-weight: bold;
    text-align: left;
    padding: 12px 15px;
    border: 1px solid #ddd;
  }
  
  html[data-theme="light"] .dataframe td {
    padding: 10px 15px;
    border: 1px solid #ddd;
    color: #333;
  }
  
  
  html[data-theme="light"] .dataframe tr:hover {
    background-color: #f2f2f2;
  }

  html[data-theme="light"] .dataframe tr {
    background-color: #fff !important; 
  }

  /* Code cells for both themes */
  div.cell {
    margin-bottom: 20px;
    border-radius: 8px;
    overflow: hidden;
  }
  
  /* Dark theme code cells */
  html[data-theme="dark"] div.cell div.cell_input {
    border-left-color: var(--primary-color);
    background-color: #252525;
    padding: 10px;
  }
  
  html[data-theme="dark"] div.cell div.cell_output {
    background-color: #1e1e1e;
    padding: 15px;
    border-radius: 0 0 8px 8px;
  }
  
  html[data-theme="dark"] .highlight {
    background: #282c34;
  }
  
  html[data-theme="dark"] pre {
    background-color: #282c34;
    color: #e0e0e0;
    padding: 15px;
    overflow-x: auto;
    font-size: 14px;
    line-height: 1.5;
  }
  
  html[data-theme="dark"] code {
    font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
    background-color: #2a2a2a;
    color: #e0e0e0;
    padding: 2px 5px;
    border-radius: 3px;
  }
  
  /* Light theme code cells */
  html[data-theme="light"] div.cell div.cell_input {
    border-left-color: var(--primary-color);
    background-color: #f5f5f5;
    padding: 10px;
  }
  
  html[data-theme="light"] div.cell div.cell_output {
    background-color: #f9f9f9;
    padding: 15px;
    border-radius: 0 0 8px 8px;
  }
  
  html[data-theme="light"] .highlight {
    background: #f5f5f5;
  }
  
  html[data-theme="light"] pre {
    background-color: #f5f5f5;
    color: #333;
    padding: 15px;
    overflow-x: auto;
    font-size: 14px;
    line-height: 1.5;
  }
  
  html[data-theme="light"] code {
    font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
    background-color: #f0f0f0;
    color: #333;
    padding: 2px 5px;
    border-radius: 3px;
  }
  
  /* Improved headings for both themes */
  h1, h2, h3, h4, h5, h6 {
    margin-top: 1.5em;
    margin-bottom: 0.8em;
    font-weight: 600;
    line-height: 1.3;
  }
  
  html[data-theme="dark"] h1, 
  html[data-theme="dark"] h2, 
  html[data-theme="dark"] h3, 
  html[data-theme="dark"] h4, 
  html[data-theme="dark"] h5, 
  html[data-theme="dark"] h6 {
    color: #e0e0e0;
  }
  
  html[data-theme="light"] h1, 
  html[data-theme="light"] h2, 
  html[data-theme="light"] h3, 
  html[data-theme="light"] h4, 
  html[data-theme="light"] h5, 
  html[data-theme="light"] h6 {
    color: #333;
  }
  
  h1 {
    font-size: 2.2em;
    padding-bottom: 0.3em;
  }
  
  html[data-theme="dark"] h1 {
    border-bottom: 1px solid #444;
  }
  
  html[data-theme="light"] h1 {
    border-bottom: 1px solid #eee;
  }
  
  h2 {
    font-size: 1.8em;
    padding-bottom: 0.2em;
  }
  
  html[data-theme="dark"] h2 {
    border-bottom: 1px solid #333;
  }
  
  html[data-theme="light"] h2 {
    border-bottom: 1px solid #f0f0f0;
  }
  
  h3 {
    font-size: 1.5em;
  }
  
  /* Better list styling */
  ul, ol {
    padding-left: 2em;
    margin: 1em 0;
  }
  
  li {
    margin-bottom: 0.5em;
  }
  
  /* Links styling */
  html[data-theme="dark"] a {
    color: #6ba4ff;
    text-decoration: none;
  }
  
  html[data-theme="dark"] a:hover {
    text-decoration: underline;
    color: #8ab8ff;
  }
  
  html[data-theme="light"] a {
    color: #0366d6;
    text-decoration: none;
  }
  
  html[data-theme="light"] a:hover {
    text-decoration: underline;
    color: #0078ff;
  }
  
  /* Make sure plots and figures are properly styled */
  .output_png img {
    padding: 10px;
    border-radius: 5px;
    margin: 10px auto;
    display: block;
  }
  
  html[data-theme="dark"] .output_png img {
    background-color: #f8f8f8;
    border: 1px solid #555;
  }
  
  html[data-theme="light"] .output_png img {
    background-color: #fff;
    border: 1px solid #ddd;
  }
  
  /* Force proper styling for right sidebar TOC */
  .bd-toc {
    position: sticky;
    top: 5rem;
    right: 0;
    height: calc(100vh - 5rem);
    overflow-y: auto;
    grid-area: none;
  }
  
  html[data-theme="dark"] .bd-toc {
    background-color: #222;
    border-left: 1px solid #333;
  }
  
  html[data-theme="light"] .bd-toc {
    background-color: #f8f9fa;
    border-left: 1px solid #eee;
  }
  
  /* Ensure proper layout for notebooks */
  .bd-container {
    max-width: 100% !important;
    grid-template-columns: 1fr min-content !important;
  }
  
  @media (max-width: 850px) {
    .bd-toc {
      display: none;
    }
  }
  
  /* Default to dark theme but support toggling */
  html {
    color-scheme: dark;
    --pst-color-primary: #4a86e8;
    --pst-color-background: #1a1a1a;
    --pst-color-on-background: #d0d0d0;
    --pst-color-surface: #222;
    --pst-color-on-surface: #d0d0d0;
  }
  
  /* Make the theme toggle more visible */
  .theme-switch-button {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s;
  }
  
  .theme-switch-button:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
  
  html[data-theme="dark"] .theme-switch-button svg {
    color: #fff;
  }
  
  html[data-theme="light"] .theme-switch-button svg {
    color: #333;
  }